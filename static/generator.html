<!DOCTYPE HTML>
<!--
	Paradigm Shift by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Pantry</title>
    <style>
        td {
            width: 12em;
        }
    </style>
</head>
<body>

<!-- Wrapper -->
<div>
    <table>
        <tr>
            <td><div id="1"></div></td>
            <td><div id="2"></div></td>
            <td><div id="3"></div></td>
            <td><div id="4"></div></td>
            <td><div id="5"></div></td>
        </tr>
        <tr>
            <td><div id="6"></div></td>
            <td><div id="7"></div></td>
            <td><div id="8"></div></td>
            <td><div id="9"></div></td>
            <td><div id="10"></div></td>
        </tr>
        <tr>
            <td><div id="11"></div></td>
            <td><div id="12"></div></td>
            <td><div id="13"></div></td>
            <td><div id="14"></div></td>
            <td><div id="15"></div></td>
        </tr>
        <tr>
            <td><div id="16"></div></td>
            <td><div id="17"></div></td>
            <td><div id="18"></div></td>
            <td><div id="19"></div></td>
            <td><div id="20"></div></td>
        </tr>
        <tr>
            <td><div id="21"></div></td>
            <td><div id="22"></div></td>
            <td><div id="23"></div></td>
            <td><div id="24"></div></td>
            <td><div id="25"></div></td>
        </tr>
        <tr>
            <td><div id="26"></div></td>
            <td><div id="27"></div></td>
            <td><div id="28"></div></td>
            <td><div id="29"></div></td>
            <td><div id="30"></div></td>
        </tr>
    </table>
</div>

<!-- Scripts -->
<script src="assets/js/qrcodegen-v1.8.0-es6.js" type="text/javascript"></script>
<script type="text/javascript">
    // Returns a string of SVG code for an image depicting the given QR Code, with the given number
    // of border modules. The string always uses Unix newlines (\n), regardless of the platform.
    function toSvgString(qr) {
        let parts = [];
        for (let y = 0; y < qr.size; y++) {
            for (let x = 0; x < qr.size; x++) {
                if (qr.getModule(x, y))
                    parts.push(`M${x + 4},${y + 4}h1v1h-1z`);
            }
        }
        return `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 ${qr.size + 8} ${qr.size + 8}" stroke="none">
	<path d="${parts.join(" ")}"/>
</svg>
`;
    }

    for (let step = 1; step <= 30; step++) {
        const xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 201) {
                const responseJsonObj = JSON.parse(this.responseText);
                const qr0 = qrcodegen.QrCode.encodeText(window.location.protocol + "//" + window.location.hostname + ":" + window.location.port + "/#" + responseJsonObj.id,
                    qrcodegen.QrCode.Ecc.HIGH);
                const svg = toSvgString(qr0);  // See qrcodegen-input-demo
                document.getElementById("" + step).innerHTML = svg
            }
        };
        xhttp.open("POST", "/api/item", true);
        xhttp.send();
    }
</script>
</body>
</html>